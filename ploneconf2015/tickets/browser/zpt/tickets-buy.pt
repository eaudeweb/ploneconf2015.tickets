<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
  metal:use-macro="here/main_template/macros/master"
  i18n:domain="eea">

<body>

<div metal:fill-slot="content-core" ng-app="PloneConfTickets" class="ploneconf-tickets">
  <div class="cart-summary pull-right">
    <a tal:attributes="href string:${context/absolute_url}/tickets.cart">
      <ngcart-summary></ngcart-summary>
    </a>
  </div>

  <!--?<form action="https://merchant.librapay.ro/pay_auth.php" method="post">-->
  <form action="." method="post" ng-controller="PloneConfTicketsBuy" name="ticketsForm" tal:attributes="
      data-price python:view.settings.price;
      data-vat python:view.settings.vat;
      data-currency python:view.settings.currency">

    <div class="form-group">
      <label for="email">
        E-mail
        <span class="required" ng-show="ticketsForm.email.$error.required" />
        <span class="required" ng-show="ticketsForm.email.$error.uniqueEmail">item already in cart</span>
      </label>
      <input type="email" class="form-control" id="email" name="email" ng-model="item.email" required unique-email />
    </div>
    <div class="form-group">
      <label for="title">
        Title
        <span class="required" ng-show="ticketsForm.title.$error.required" />
      </label>
      <select class="form-control" id="title" name="title" ng-model="item.title" required>
          <option></option>
          <option>Mr</option>
          <option>Mrs</option>
          <option>Ms</option>
          <option>Miss</option>
        </select>
    </div>
    <div class="form-group">
      <label for="firstName">
        First Name
        <span class="required" ng-show="ticketsForm.firstName.$error.required" />
      </label>
      <input type="text" class="form-control" id="firstName" name="firstName" ng-model="item.firstName" required/>
    </div>
    <div class="form-group">
      <label for="lastName">
        Last Name
        <span class="required" ng-show="ticketsForm.lastName.$error.required" />
      </label>
      <input type="text" class="form-control" id="lastName" name="lastName" ng-model="item.lastName" required />
    </div>
    <div class="form-group">
      <label for="country">
        Country
        <span class="required" ng-show="ticketsForm.country.$error.required" />
      </label>
      <input type="text" class="form-control" id="country" name="country" ng-model="item.country" required/>
    </div>
    <div class="form-group">
      <label for="company">
        Company
      </label>
      <input type="text" class="form-control" id="company" name="company" ng-model="item.company"/>
    </div>
    <div class="form-group">
      <label for="tShirt">
        T-Shirt size
        <span class="required" ng-show="ticketsForm.tShirt.$error.required" />
      </label>
      <select class="form-control" id="tShirt" name="tShirt" ng-model="item.tShirt" required>
          <option>XXS</option>
          <option>XS</option>
          <option>S</option>
          <option>M</option>
          <option>L</option>
          <option>XL</option>
          <option>XXL</option>
        </select>
    </div>
    <div class="form-group checkbox">
      <label for="trainings">
        <input type="checkbox" id="trainings" name="trainings" value="" ng-model="item.trainings"/>
        I will attend to the following training session:
      </label>
    </div>
    <div class="form-group" ng-show="item.trainings">
      <div class="radio">
        <label for="training1">
          <input type="radio" id="training1" name="trainings" value="1" ng-model="item.training"/>
          Training 1
        </label>
      </div>
      <div class="radio">
        <label for="training2">
          <input type="radio" id="training2" name="trainings" value="2" ng-model="item.training" />
          Training 2
        </label>
      </div>
      <div class="radio">
        <label for="training3">
          <input type="radio" id="training3" name="trainings" value="3" ng-model="item.training" />
          Training 3
        </label>
      </div>
    </div>
    <div class="form-group">
      <label for="twitter">
        Twitter
      </label>
      <input type="text" class="form-control" id="twitter" name="twitter" placeholder="" ng-model="item.twitter"/>
    </div>
    <div class="form-group">
      <label for="irc">
        IRC
      </label>
      <input type="text" class="form-control" id="irc" name="irc" placeholder="" ng-model="item.irc"/>
    </div>
    <div class="form-group">
      <label for="phone">
        Phone
      </label>
      <input type="text" class="form-control" id="phone" name="phone" placeholder="" ng-model="item.phone"/>
    </div>

    <div class="form-group pull-right" ng-show="chartNotEmpty() && !ticketsForm.$valid">
      <a class="btn btn-sm btn-primary" href="tickets.cart" >Continue to cart</a>
    </div>

    <div class="form-group" ng-show="!ticketsForm.$valid">
      <a class="btn btn-sm btn-primary" ng-disabled="true"><span class="ng-scope">Add to cart</span></a>
    </div>
    <div class="form-group" ng-show="ticketsForm.$valid">
      <ngcart-addtocart id="{{ item.email }}" name="{{ item.firstName + ' ' + item.lastName }}" price="{{ price }}" quantity="1" quantity-max="1" data="item">Add to cart</ngcart-addtocart>
    </div>


  </form>

</div>

</body>
</html>
